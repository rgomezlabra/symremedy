<h1>Lista de Espacios</h1>

{% macro container_tree(containers) %}
    {% import _self as macros %}
    {% for container in containers %}
        <li>
            {% if container.category %}
                {{ container.category.name }}:
            {% endif %}
            {{ container.name }}: {{ container.description }}
            <a href="{{ container.id }}/show">Mostrar</a>
            <a href="{{ container.id }}/edit">Editar</a>
            {% if container.children is not empty %}
                <a href="{{ container.id }}/create">Crear espacio hijo</a>
                <ul>
                    {{ macros.container_tree(container.children) }}
                </ul>
            {% else %}
                <a href="{{ container.id }}/delete" onclick="return confirm('¿Borrar espacio {{ container.name }}?')">Borrar</a>
                <a href="{{ container.id }}/create">Crear espacio hijo</a>
            {% endif %}
        </li>
    {% endfor %}
{% endmacro %}

{% import _self as macros %}

<ul class="container-tree">
    {{ macros.container_tree(containers) }}
</ul>
<p><a href="create">Crear espacio raíz</a>
   <a href="categories">Añadir categoría</a></p>
